[English](README.md) | [Русский](README_RU.md)

# Простой пример использования в браузере

Этот пример демонстрирует базовое веб-приложение, использующее пакет `rci-manager`
для взаимодействия с RCI API. Пример написан на "ванильном" TypeScript и показывает, как:

- аутентифицироваться с помощью имени пользователя и пароля
- получать данные (`show version`) через RCI API

## Необходимые условия

Перед запуском этого примера убедитесь, что у вас есть:

* Установленные `Node.js` (рекомендуется LTS версия >= 22) и `npm`
* Установленный `pnpm`
* Устройство Keenetic/Netcraze, к локальной сети которого подключен ваш компьютер
* SSH-доступ к Entware на этом устройстве, если вы планируете использовать `deploy` скрипт,
  чтобы развернуть это веб-приложение на самом устройстве

## Настройка

1. **Перейдите в директорию проекта:**
   ```bash
   cd examples/simple-browser-demo
   ```

2. **Установите зависимости:**
   ```bash
   pnpm install
   ```

3. **(опционально) Настройте значение PROXY_ADDR по умолчанию:**
   Скопируйте файл `.env.template` в `.env` и обновите переменную `PROXY_ADDR`, указав IP-адрес устройства,
   на которое вы хотите проксировать запросы.

   ```bash
   cp .env.template .env
   # Откройте .env и задайте PROXY_ADDR, например: PROXY_ADDR=192.168.1.1
   # Это значение будет использоваться, если аргумент --proxy-addr не передан скрипту 'dev'.
   ```


## Запуск приложения

### Режим разработки

Для запуска приложения в режиме разработки с горячей перезагрузкой:

Вы можете указать адрес RCI-устройства с помощью аргумента `--proxy-addr` (или `-a`):

```bash
# Использование конкретного IP-адреса через CLI (это имеет приоритет над .env)
pnpm run dev --proxy-addr 192.168.1.1

# Или, если PROXY_ADDR установлен в вашем файле .env:
pnpm run dev
```

Откройте браузер по адресу, который будет выведен в консоли (например, `http://localhost:5174`).
Используйте имя пользователя и пароль вашего устройства для авторизации этого веб-приложения на вашем устройстве.


### Production-сборка

Для создания `production`-сборки:

```bash
npm run build
```

В результате будет создан один файл `index.html` в директории `dist`,
содержащий весь HTML, CSS и минифицированный JavaScript.


### Развертывание приложения

Скрипт `deploy` использует `yargs` для удобного развертывания продакшен-сборки на удалённый сервер через SCP.

```bash
pnpm run deploy --host <user@remote_host> --path <remote_path> [--port <ssh_port>]
```

**Аргументы:**

* `--host <user@remote_host>`: **(Обязательно)** Удалённый хост и имя пользователя для SSH/SCP (например,
  `user@192.168.1.100`).
* `--path <remote_path>`: **(Обязательно)** Путь на удалённом хосте, куда будут скопированы файлы из `dist` (например,
  `/var/www/html/demo`).
* `--port <ssh_port>`: **(Необязательно)** Порт SSH. По умолчанию `22`.

**Пример:**

```bash
pnpm run deploy --host entware-host --path /opt/share/nginx/html/browser-demo/ --port 2222
```
