[English](README.md) | **Русский**

# `rci-tools`

Устройства Keenetic/Netcraze предоставляют REST-подобный JSON API,
позволяющий настраивать и мониторить устройство. Этот API называется
RCI (**R**EST **C**ore **I**nterface). Репозиторий `rci-tools` содержит
неофициальную документацию по RCI API и `npm`-пакеты, которые можно использовать
для взаимодействия с RCI API из JavaScript/TypeScript кода.
Этот проект находится в разработке.

Содержимое репозитория можно разделить на три части:
1. Документация по RCI API ([Документация](#1-документация))
2. `npm`-пакеты для работы с этим API ([`npm`-пакеты](#2-npm-пакеты))
3. Пример приложений, созданных с использованием этих `npm`-пакетов ([Примеры приложений](#3-примеры-приложений))

## 1. Документация

- [Аутентификация по паролю](./docs/AUTH.ru.md)
- [RCI API](./docs/RCI_API.ru.md)

## 2. `npm`-пакеты

### Необходимое ПО

Для запуска кода из этого репозитория вам потребуется установить
определённое программное обеспечение на ваш компьютер.

- Node.js (v22 или более новая LTS-версия)
- Менеджер пакетов `pnpm`

`pnpm` можно установить через [corepack](https://github.com/nodejs/corepack), который распространяется вместе с Node.js.
Подробнее — в [документации pnpm](https://pnpm.io/installation).

```shell
corepack enable pnpm # установка pnpm через corepack
```

```shell
pnpm install # установка зависимостей (для пакетов и примеров приложений)
```

### Пакеты

- [@rci-tools/core](./packages/core)
- [@rci-tools/adapter-axios](./packages/adapter-axios)

## 3. Примеры приложений

### Необходимое ПО

Перед запуском примеров приложений необходимо собрать пакеты.
Выполните команду `pnpm build:packages` в корне репозитория для сборки пакетов.
Далее следуйте инструкциям в README выбранного приложения.

> [!NOTE]
> Пример приложения, предназначенные для запуска в браузере, требуют определённого "бэкенда",
> настроенного на целевом устройстве Keenetic/Netcraze для проксирования API-запросов к прошивке устройства.
> Для настройки бэкенда потребуется
> [установить репозиторий Entware](https://help.keenetic.com/hc/ru/articles/360021214160-Установка-репозитория-пакетной-системы-Entware-на-USB-накопитель)
> на целевом устройстве и иметь возможность подключаться к нему по SSH.
> В браузерных примерах будут скрипты для настройки бэкенда
> с использованием SSH-доступа к устройству.
>
> Для аутентификации по паролю через SSH эти скрипты требуют наличия
> утилиты `sshpass` в вашей системе. Пользователи Windows могут попробовать
> [sshpass-win32](https://github.com/xhcoding/sshpass-win32) или использовать WSL.
>
> Для аутентификации по ключу через SSH необходимо заменить `dropbear`,
> установленный Entware, на сервер OpenSSH. Гайд по замене можно найти
> [здесь](https://forum.keenetic.ru/topic/361-openssh-%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%BE-dropbear-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B8-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5/).


### Приложения

- [Пример использования в браузере](./examples/simple-browser-demo)
- [Пример использования с Node.js](./examples/simple-nodejs-demo)
- [Local Monitor (Node.js)](./examples/local-monitor)
- [WebCLI (Svelte)](./examples/sv-webcli)
